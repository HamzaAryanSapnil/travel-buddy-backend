model PaymentTransaction {
  id                     String   @id @default(uuid())
  userId                 String?  @map("user_id")
  subscriptionId         String?  @map("subscription_id")
  amount                 Float
  currency               String   @default("USD")
  stripePaymentIntentId  String?  @unique @map("stripe_payment_intent_id")
  status                 String   // SUCCEEDED, PENDING, REFUNDED, FAILED
  gatewayData            Json?    @map("gateway_data")
  createdAt              DateTime @default(now()) @map("created_at")
  updatedAt              DateTime @updatedAt @map("updated_at")

  // Relations
  user                   User?    @relation(fields: [userId], references: [id], onDelete: SetNull)
  subscription           Subscription? @relation(fields: [subscriptionId], references: [id], onDelete: SetNull)

  @@index([userId])
  @@index([subscriptionId])
  @@index([stripePaymentIntentId])
  @@map("payment_transactions")
}

