model Subscription {
  id                   String   @id @default(uuid())
  userId               String   @map("user_id")
  planName             String?  @map("plan_name")
  planType             String?  @map("plan_type") // MONTHLY, YEARLY
  status               SubscriptionStatus @default(ACTIVE)
  stripeSubscriptionId String?   @unique @map("stripe_subscription_id")
  startedAt            DateTime @default(now()) @map("started_at")
  expiresAt            DateTime? @map("expires_at")
  cancelAtPeriodEnd    Boolean? @default(false) @map("cancel_at_period_end")
  metadata             Json?

  // Relations
  user                 User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  payments             PaymentTransaction[]

  @@index([userId, status])
  @@index([stripeSubscriptionId])
  @@map("subscriptions")
}

